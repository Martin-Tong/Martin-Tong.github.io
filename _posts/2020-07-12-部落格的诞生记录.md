---
layout: post
category: blog
tags: tools 
---

>项目用到的工具：
>
>travis：[自动构建发布工具](https://travis-ci.org/)
>
>github pages：[免费的静态网站托管平台](https://pages.github.com/)
>
>jekyll：[基于ruby的静态网页生成工具](https://jekyllrb.com/)

##### 前言：
##### 之前就接触过jekyll，但是由于没有接触过ruby，同时使用这个工具需要学习些DSL，所以没有继续学习使用下去。最近在回顾NUXT，看到BUXT也有生成静态页面的功能，和jekyll比较了一下觉得jekyll用来做静态网站的开发工具体验会更好一点（可能是更有折腾的感觉吧）。所以就有了这个基于jekyll开发个人部落格。

### 工具安装

在使用任何一个工具之前，其文档必然会有详细的安装配置指南，这里我只写出基本的步骤和常用的指令，因为有些东西我也没有用到过。所以想完整的学习还是得靠官方的文档。

- jekyll：
既然是基于ruby的工具，首先要安装必要的环境依赖。以ubuntu下安装为例（更多平台安装[参照官方文档](https://jekyllrb.com/docs/installation/)）：
{% highlight ubuntu %}
sudo apt-get install ruby-full build-essential zlib1g-dev 
#注意涉及到权限问题最好把Ruby Gems不要安装在root用户下。
#可以把gems理解成npm或者pip，在不通过的用户或者项目下安装方便依赖管理
#配置用户gems安装目录
echo '# Install Ruby Gems to ~/gems' >> ~/.bashrc
echo 'export GEM_HOME="$HOME/gems"' >> ~/.bashrc
echo 'export PATH="$HOME/gems/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc
#最后安装jekyll
gem install jekyll bundler
{% endhighlight %}
推荐使用bundler，在我的理解里，bundler应该作用类似于 npm 的**package-lock.json**和 pip 下的**pip freeze >requirement.txt**用于管理当前项目下各依赖项目的版本。使用bundler也方便后面我们使用travis等自动构建发布工具。
{% highlight ruby %}
#国内用户解决gems源下载慢的问题可以如下方式解决
gem sources -c #清除当前的源
gem sources -a https://gems.ruby-china.com #添加国内镜像源

mkdir pjfloder
cd pjfloder
bundle init #生成Gemfile，如果需要使用国内镜像源需要修改文件里的source为“https://gems.ruby-china.com”
bundle config set --local path 'vendor/bundle' #配置bundle下载gems包放置的目录，推荐使用这个目录可以省去不少的步骤。我修改过，走了不少弯路又改回来了，都是泪。
bundle add jekyll #安装jekyll
bundle exec jekyll new --force --skip-bundle . #在当前目录初始化jekyll项目,由于当前目录下已经有内容了所以使用--force，注意后面那个'.'。
bundle install #因为jekyll初始化后默认有一些依赖项而上面我们使用了--skip-bundle，如默认的模板minima等。所以需要执行一下install不然后缺少依赖报错。
{% endhighlight %}
然后就可以愉快的进行**bundle exec jekyll build**或者**bundle exec jekyll serve**等步骤了。注意**bundle exec**如果使用了bundler的话要记住加这个前缀保证每次运行时的依赖项版本一致。

- gh pages